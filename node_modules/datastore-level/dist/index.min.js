"use strict";(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.DatastoreLevel = factory()}(typeof self !== 'undefined' ? self : this, function () {
var DatastoreLevel=(()=>{var Jo=Object.create;var jt=Object.defineProperty;var Xo=Object.getOwnPropertyDescriptor;var Zo=Object.getOwnPropertyNames;var Qo=Object.getPrototypeOf,eu=Object.prototype.hasOwnProperty;var m=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),I=(r,e)=>{for(var t in e)jt(r,t,{get:e[t],enumerable:!0})},di=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Zo(e))!eu.call(r,i)&&i!==t&&jt(r,i,{get:()=>e[i],enumerable:!(n=Xo(e,i))||n.enumerable});return r};var T=(r,e,t)=>(t=r!=null?Jo(Qo(r)):{},di(e||!r||!r.__esModule?jt(t,"default",{value:r,enumerable:!0}):t,r)),tu=r=>di(jt({},"__esModule",{value:!0}),r);var ji=m((Ia,Vi)=>{"use strict";function Pi(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function pc(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return Pi(r,t)}catch{t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),Pi(new i,t)}}Vi.exports=pc});var tn=m((Ra,qi)=>{"use strict";var wc=async r=>{let e=[];for await(let t of r)e.push(t);return e};qi.exports=wc});var rn=m((Pa,Wi)=>{"use strict";var Ec=async r=>{for await(let e of r);};Wi.exports=Ec});var Ht=m((Va,Gi)=>{"use strict";var Dc=async function*(r,e){for await(let t of r)await e(t)&&(yield t)};Gi.exports=Dc});var Jt=m((ja,Yi)=>{"use strict";var xc=async function*(r,e){let t=0;if(!(e<1)){for await(let n of r)if(yield n,t++,t===e)return}};Yi.exports=xc});var on=m((Ga,Hi)=>{"use strict";var bc=async function*(r,e){for await(let t of r)yield e(t)};Hi.exports=bc});var Xi=m((Qa,Ji)=>{Ji.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var es=m((tl,Qi)=>{var Zi=Xi();Qi.exports=class{constructor(e){this.hwm=e||16,this.head=new Zi(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let t=this.head;this.head=t.next=new Zi(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return e}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}});var rs=m((rl,ts)=>{var un=es();ts.exports=r=>{r=r||{};let e;typeof r=="function"?(e=r,r={}):e=r.onEnd;let t=new un,n,i,s,o=()=>{if(!t.isEmpty()){if(r.writev){let y,D=[];for(;!t.isEmpty();){if(y=t.shift(),y.error)throw y.error;D.push(y.value)}return{done:y.done,value:D}}let d=t.shift();if(d.error)throw d.error;return d}return s?{done:!0}:new Promise((d,y)=>{i=D=>(i=null,D.error?y(D.error):r.writev&&!D.done?d({done:D.done,value:[D.value]}):d(D),n)})},u=d=>i?i(d):(t.push(d),n),a=d=>(t=new un,i?i({error:d}):(t.push({error:d}),n)),l=d=>s?n:u({done:!1,value:d}),c=d=>s?n:(s=!0,d?a(d):u({done:!0})),f=()=>(t=new un,c(),{done:!0}),p=d=>(c(d),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:o,return:f,throw:p,push:l,end:c},!e)return n;let g=n;return n={[Symbol.asyncIterator](){return this},next(){return g.next()},throw(d){return g.throw(d),e&&(e(d),e=null),{done:!0}},return(){return g.return(),e&&(e(),e=null),{done:!0}},push:l,end(d){return g.end(d),e&&(e(d),e=null),n}},n}});var cn=m((nl,ns)=>{"use strict";var Cc=rs(),vc=async function*(...r){let e=Cc();setTimeout(async()=>{try{await Promise.all(r.map(async t=>{for await(let n of t)e.push(n)})),e.end()}catch(t){e.end(t)}},0),yield*e};ns.exports=vc});var os=m((xl,ss)=>{var Xe=1e3,Ze=Xe*60,Qe=Ze*60,Te=Qe*24,Ic=Te*7,Lc=Te*365.25;ss.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Oc(r);if(t==="number"&&isFinite(r))return e.long?Nc(r):kc(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Oc(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Lc;case"weeks":case"week":case"w":return t*Ic;case"days":case"day":case"d":return t*Te;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Qe;case"minutes":case"minute":case"mins":case"min":case"m":return t*Ze;case"seconds":case"second":case"secs":case"sec":case"s":return t*Xe;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function kc(r){var e=Math.abs(r);return e>=Te?Math.round(r/Te)+"d":e>=Qe?Math.round(r/Qe)+"h":e>=Ze?Math.round(r/Ze)+"m":e>=Xe?Math.round(r/Xe)+"s":r+"ms"}function Nc(r){var e=Math.abs(r);return e>=Te?Xt(r,e,Te,"day"):e>=Qe?Xt(r,e,Qe,"hour"):e>=Ze?Xt(r,e,Ze,"minute"):e>=Xe?Xt(r,e,Xe,"second"):r+" ms"}function Xt(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var cs=m((bl,us)=>{function Uc(r){t.debug=t,t.default=t,t.coerce=a,t.disable=s,t.enable=i,t.enabled=o,t.humanize=os(),t.destroy=l,Object.keys(r).forEach(c=>{t[c]=r[c]}),t.names=[],t.skips=[],t.formatters={};function e(c){let f=0;for(let p=0;p<c.length;p++)f=(f<<5)-f+c.charCodeAt(p),f|=0;return t.colors[Math.abs(f)%t.colors.length]}t.selectColor=e;function t(c){let f,p=null,g,d;function y(...D){if(!y.enabled)return;let C=y,S=Number(new Date),P=S-(f||S);C.diff=P,C.prev=f,C.curr=S,f=S,D[0]=t.coerce(D[0]),typeof D[0]!="string"&&D.unshift("%O");let _=0;D[0]=D[0].replace(/%([a-zA-Z%])/g,(V,k)=>{if(V==="%%")return"%";_++;let j=t.formatters[k];if(typeof j=="function"){let ze=D[_];V=j.call(C,ze),D.splice(_,1),_--}return V}),t.formatArgs.call(C,D),(C.log||t.log).apply(C,D)}return y.namespace=c,y.useColors=t.useColors(),y.color=t.selectColor(c),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(g!==t.namespaces&&(g=t.namespaces,d=t.enabled(c)),d),set:D=>{p=D}}),typeof t.init=="function"&&t.init(y),y}function n(c,f){let p=t(this.namespace+(typeof f>"u"?":":f)+c);return p.log=this.log,p}function i(c){t.save(c),t.namespaces=c,t.names=[],t.skips=[];let f,p=(typeof c=="string"?c:"").split(/[\s,]+/),g=p.length;for(f=0;f<g;f++)!p[f]||(c=p[f].replace(/\*/g,".*?"),c[0]==="-"?t.skips.push(new RegExp("^"+c.slice(1)+"$")):t.names.push(new RegExp("^"+c+"$")))}function s(){let c=[...t.names.map(u),...t.skips.map(u).map(f=>"-"+f)].join(",");return t.enable(""),c}function o(c){if(c[c.length-1]==="*")return!0;let f,p;for(f=0,p=t.skips.length;f<p;f++)if(t.skips[f].test(c))return!1;for(f=0,p=t.names.length;f<p;f++)if(t.names[f].test(c))return!0;return!1}function u(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function a(c){return c instanceof Error?c.stack||c.message:c}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}us.exports=Uc});var fs=m((N,Zt)=>{N.formatArgs=Mc;N.save=Pc;N.load=Vc;N.useColors=Rc;N.storage=jc();N.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();N.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Rc(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Mc(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+Zt.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}N.log=console.debug||console.log||(()=>{});function Pc(r){try{r?N.storage.setItem("debug",r):N.storage.removeItem("debug")}catch{}}function Vc(){let r;try{r=N.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function jc(){try{return localStorage}catch{}}Zt.exports=cs()(N);var{formatters:Kc}=Zt.exports;Kc.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var ls=m((Yl,as)=>{"use strict";var qc=tn(),zc=async function*(r,e){yield*(await qc(r)).sort(e)};as.exports=zc});var ps=m(ds=>{"use strict";ds.supports=function(...e){let t=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}});var Y=m((Xl,ys)=>{"use strict";ys.exports=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var ws=m(Qt=>{"use strict";Qt.byteLength=Gc;Qt.toByteArray=Hc;Qt.fromByteArray=Zc;var Q=[],q=[],Wc=typeof Uint8Array<"u"?Uint8Array:Array,fn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Be=0,ms=fn.length;Be<ms;++Be)Q[Be]=fn[Be],q[fn.charCodeAt(Be)]=Be;var Be,ms;q["-".charCodeAt(0)]=62;q["_".charCodeAt(0)]=63;function gs(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Gc(r){var e=gs(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Yc(r,e,t){return(e+t)*3/4-t}function Hc(r){var e,t=gs(r),n=t[0],i=t[1],s=new Wc(Yc(r,n,i)),o=0,u=i>0?n-4:n,a;for(a=0;a<u;a+=4)e=q[r.charCodeAt(a)]<<18|q[r.charCodeAt(a+1)]<<12|q[r.charCodeAt(a+2)]<<6|q[r.charCodeAt(a+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=q[r.charCodeAt(a)]<<2|q[r.charCodeAt(a+1)]>>4,s[o++]=e&255),i===1&&(e=q[r.charCodeAt(a)]<<10|q[r.charCodeAt(a+1)]<<4|q[r.charCodeAt(a+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Jc(r){return Q[r>>18&63]+Q[r>>12&63]+Q[r>>6&63]+Q[r&63]}function Xc(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(Jc(n));return i.join("")}function Zc(r){for(var e,t=r.length,n=t%3,i=[],s=16383,o=0,u=t-n;o<u;o+=s)i.push(Xc(r,o,o+s>u?u:o+s));return n===1?(e=r[t-1],i.push(Q[e>>2]+Q[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(Q[e>>10]+Q[e>>4&63]+Q[e<<2&63]+"=")),i.join("")}});var Es=m(hn=>{hn.read=function(r,e,t,n,i){var s,o,u=i*8-n-1,a=(1<<u)-1,l=a>>1,c=-7,f=t?i-1:0,p=t?-1:1,g=r[e+f];for(f+=p,s=g&(1<<-c)-1,g>>=-c,c+=u;c>0;s=s*256+r[e+f],f+=p,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=n;c>0;o=o*256+r[e+f],f+=p,c-=8);if(s===0)s=1-l;else{if(s===a)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(g?-1:1)*o*Math.pow(2,s-n)};hn.write=function(r,e,t,n,i,s){var o,u,a,l=s*8-i-1,c=(1<<l)-1,f=c>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:s-1,d=n?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-o))<1&&(o--,a*=2),o+f>=1?e+=p/a:e+=p*Math.pow(2,1-f),e*a>=2&&(o++,a/=2),o+f>=c?(u=0,o=c):o+f>=1?(u=(e*a-1)*Math.pow(2,i),o=o+f):(u=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;r[t+g]=u&255,g+=d,u/=256,i-=8);for(o=o<<i|u,l+=i;l>0;r[t+g]=o&255,g+=d,o/=256,l-=8);r[t+g-d]|=y*128}});var rr=m(nt=>{"use strict";var an=ws(),tt=Es(),Ds=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;nt.Buffer=h;nt.SlowBuffer=sf;nt.INSPECT_MAX_BYTES=50;var er=2147483647;nt.kMaxLength=er;h.TYPED_ARRAY_SUPPORT=Qc();!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Qc(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(!!h.isBuffer(this))return this.buffer}});Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(!!h.isBuffer(this))return this.byteOffset}});function oe(r){if(r>er)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,h.prototype),e}function h(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return yn(r)}return vs(r,e,t)}h.poolSize=8192;function vs(r,e,t){if(typeof r=="string")return tf(r,e);if(ArrayBuffer.isView(r))return rf(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(ee(r,ArrayBuffer)||r&&ee(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ee(r,SharedArrayBuffer)||r&&ee(r.buffer,SharedArrayBuffer)))return dn(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return h.from(n,e,t);let i=nf(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return h.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}h.from=function(r,e,t){return vs(r,e,t)};Object.setPrototypeOf(h.prototype,Uint8Array.prototype);Object.setPrototypeOf(h,Uint8Array);function As(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function ef(r,e,t){return As(r),r<=0?oe(r):e!==void 0?typeof t=="string"?oe(r).fill(e,t):oe(r).fill(e):oe(r)}h.alloc=function(r,e,t){return ef(r,e,t)};function yn(r){return As(r),oe(r<0?0:mn(r)|0)}h.allocUnsafe=function(r){return yn(r)};h.allocUnsafeSlow=function(r){return yn(r)};function tf(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=Fs(r,e)|0,n=oe(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function ln(r){let e=r.length<0?0:mn(r.length)|0,t=oe(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function rf(r){if(ee(r,Uint8Array)){let e=new Uint8Array(r);return dn(e.buffer,e.byteOffset,e.byteLength)}return ln(r)}function dn(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,h.prototype),n}function nf(r){if(h.isBuffer(r)){let e=mn(r.length)|0,t=oe(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||wn(r.length)?oe(0):ln(r);if(r.type==="Buffer"&&Array.isArray(r.data))return ln(r.data)}function mn(r){if(r>=er)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+er.toString(16)+" bytes");return r|0}function sf(r){return+r!=r&&(r=0),h.alloc(+r)}h.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==h.prototype};h.compare=function(e,t){if(ee(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),ee(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let s=0,o=Math.min(n,i);s<o;++s)if(e[s]!==t[s]){n=e[s],i=t[s];break}return n<i?-1:i<n?1:0};h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};h.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return h.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=h.allocUnsafe(t),s=0;for(n=0;n<e.length;++n){let o=e[n];if(ee(o,Uint8Array))s+o.length>i.length?(h.isBuffer(o)||(o=h.from(o)),o.copy(i,s)):Uint8Array.prototype.set.call(i,o,s);else if(h.isBuffer(o))o.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return i};function Fs(r,e){if(h.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||ee(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return pn(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Ns(r).length;default:if(i)return n?-1:pn(r).length;e=(""+e).toLowerCase(),i=!0}}h.byteLength=Fs;function of(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return mf(this,e,t);case"utf8":case"utf-8":return Ts(this,e,t);case"ascii":return pf(this,e,t);case"latin1":case"binary":return yf(this,e,t);case"base64":return lf(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gf(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}h.prototype._isBuffer=!0;function Se(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}h.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)Se(this,t,t+1);return this};h.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)Se(this,t,t+3),Se(this,t+1,t+2);return this};h.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)Se(this,t,t+7),Se(this,t+1,t+6),Se(this,t+2,t+5),Se(this,t+3,t+4);return this};h.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Ts(this,0,e):of.apply(this,arguments)};h.prototype.toLocaleString=h.prototype.toString;h.prototype.equals=function(e){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:h.compare(this,e)===0};h.prototype.inspect=function(){let e="",t=nt.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};Ds&&(h.prototype[Ds]=h.prototype.inspect);h.prototype.compare=function(e,t,n,i,s){if(ee(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),t<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&t>=n)return 0;if(i>=s)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;let o=s-i,u=n-t,a=Math.min(o,u),l=this.slice(i,s),c=e.slice(t,n);for(let f=0;f<a;++f)if(l[f]!==c[f]){o=l[f],u=c[f];break}return o<u?-1:u<o?1:0};function _s(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,wn(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=h.from(e,n)),h.isBuffer(e))return e.length===0?-1:xs(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):xs(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function xs(r,e,t,n,i){let s=1,o=r.length,u=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;s=2,o/=2,u/=2,t/=2}function a(c,f){return s===1?c[f]:c.readUInt16BE(f*s)}let l;if(i){let c=-1;for(l=t;l<o;l++)if(a(r,l)===a(e,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===u)return c*s}else c!==-1&&(l-=l-c),c=-1}else for(t+u>o&&(t=o-u),l=t;l>=0;l--){let c=!0;for(let f=0;f<u;f++)if(a(r,l+f)!==a(e,f)){c=!1;break}if(c)return l}return-1}h.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};h.prototype.indexOf=function(e,t,n){return _s(this,e,t,n,!0)};h.prototype.lastIndexOf=function(e,t,n){return _s(this,e,t,n,!1)};function uf(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let s=e.length;n>s/2&&(n=s/2);let o;for(o=0;o<n;++o){let u=parseInt(e.substr(o*2,2),16);if(wn(u))return o;r[t+o]=u}return o}function cf(r,e,t,n){return tr(pn(e,r.length-t),r,t,n)}function ff(r,e,t,n){return tr(xf(e),r,t,n)}function hf(r,e,t,n){return tr(Ns(e),r,t,n)}function af(r,e,t,n){return tr(bf(e,r.length-t),r,t,n)}h.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-t;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return uf(this,e,t,n);case"utf8":case"utf-8":return cf(this,e,t,n);case"ascii":case"latin1":case"binary":return ff(this,e,t,n);case"base64":return hf(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return af(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function lf(r,e,t){return e===0&&t===r.length?an.fromByteArray(r):an.fromByteArray(r.slice(e,t))}function Ts(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let s=r[i],o=null,u=s>239?4:s>223?3:s>191?2:1;if(i+u<=t){let a,l,c,f;switch(u){case 1:s<128&&(o=s);break;case 2:a=r[i+1],(a&192)===128&&(f=(s&31)<<6|a&63,f>127&&(o=f));break;case 3:a=r[i+1],l=r[i+2],(a&192)===128&&(l&192)===128&&(f=(s&15)<<12|(a&63)<<6|l&63,f>2047&&(f<55296||f>57343)&&(o=f));break;case 4:a=r[i+1],l=r[i+2],c=r[i+3],(a&192)===128&&(l&192)===128&&(c&192)===128&&(f=(s&15)<<18|(a&63)<<12|(l&63)<<6|c&63,f>65535&&f<1114112&&(o=f))}}o===null?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=u}return df(n)}var bs=4096;function df(r){let e=r.length;if(e<=bs)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=bs));return t}function pf(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function yf(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function mf(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let s=e;s<t;++s)i+=Cf[r[s]];return i}function gf(r,e,t){let n=r.slice(e,t),i="";for(let s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}h.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,h.prototype),i};function F(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||F(e,t,this.length);let i=this[e],s=1,o=0;for(;++o<t&&(s*=256);)i+=this[e+o]*s;return i};h.prototype.readUintBE=h.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||F(e,t,this.length);let i=this[e+--t],s=1;for(;t>0&&(s*=256);)i+=this[e+--t]*s;return i};h.prototype.readUint8=h.prototype.readUInt8=function(e,t){return e=e>>>0,t||F(e,1,this.length),this[e]};h.prototype.readUint16LE=h.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||F(e,2,this.length),this[e]|this[e+1]<<8};h.prototype.readUint16BE=h.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||F(e,2,this.length),this[e]<<8|this[e+1]};h.prototype.readUint32LE=h.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};h.prototype.readUint32BE=h.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||F(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};h.prototype.readBigUInt64LE=me(function(e){e=e>>>0,rt(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Et(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(s)<<BigInt(32))});h.prototype.readBigUInt64BE=me(function(e){e=e>>>0,rt(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Et(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(s)});h.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||F(e,t,this.length);let i=this[e],s=1,o=0;for(;++o<t&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*t)),i};h.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||F(e,t,this.length);let i=t,s=1,o=this[e+--i];for(;i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*t)),o};h.prototype.readInt8=function(e,t){return e=e>>>0,t||F(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};h.prototype.readInt16LE=function(e,t){e=e>>>0,t||F(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};h.prototype.readInt16BE=function(e,t){e=e>>>0,t||F(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};h.prototype.readInt32LE=function(e,t){return e=e>>>0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};h.prototype.readInt32BE=function(e,t){return e=e>>>0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};h.prototype.readBigInt64LE=me(function(e){e=e>>>0,rt(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Et(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});h.prototype.readBigInt64BE=me(function(e){e=e>>>0,rt(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Et(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});h.prototype.readFloatLE=function(e,t){return e=e>>>0,t||F(e,4,this.length),tt.read(this,e,!0,23,4)};h.prototype.readFloatBE=function(e,t){return e=e>>>0,t||F(e,4,this.length),tt.read(this,e,!1,23,4)};h.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||F(e,8,this.length),tt.read(this,e,!0,52,8)};h.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||F(e,8,this.length),tt.read(this,e,!1,52,8)};function L(r,e,t,n,i,s){if(!h.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let u=Math.pow(2,8*n)-1;L(this,e,t,n,u,0)}let s=1,o=0;for(this[t]=e&255;++o<n&&(s*=256);)this[t+o]=e/s&255;return t+n};h.prototype.writeUintBE=h.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let u=Math.pow(2,8*n)-1;L(this,e,t,n,u,0)}let s=n-1,o=1;for(this[t+s]=e&255;--s>=0&&(o*=256);)this[t+s]=e/o&255;return t+n};h.prototype.writeUint8=h.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||L(this,e,t,1,255,0),this[t]=e&255,t+1};h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||L(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||L(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||L(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||L(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function Bs(r,e,t,n,i){ks(e,n,i,r,t,7);let s=Number(e&BigInt(4294967295));r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,t}function Ss(r,e,t,n,i){ks(e,n,i,r,t,7);let s=Number(e&BigInt(4294967295));r[t+7]=s,s=s>>8,r[t+6]=s,s=s>>8,r[t+5]=s,s=s>>8,r[t+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=o,o=o>>8,r[t+2]=o,o=o>>8,r[t+1]=o,o=o>>8,r[t]=o,t+8}h.prototype.writeBigUInt64LE=me(function(e,t=0){return Bs(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});h.prototype.writeBigUInt64BE=me(function(e,t=0){return Ss(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});h.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let a=Math.pow(2,8*n-1);L(this,e,t,n,a-1,-a)}let s=0,o=1,u=0;for(this[t]=e&255;++s<n&&(o*=256);)e<0&&u===0&&this[t+s-1]!==0&&(u=1),this[t+s]=(e/o>>0)-u&255;return t+n};h.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let a=Math.pow(2,8*n-1);L(this,e,t,n,a-1,-a)}let s=n-1,o=1,u=0;for(this[t+s]=e&255;--s>=0&&(o*=256);)e<0&&u===0&&this[t+s+1]!==0&&(u=1),this[t+s]=(e/o>>0)-u&255;return t+n};h.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||L(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};h.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||L(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};h.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||L(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};h.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||L(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};h.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};h.prototype.writeBigInt64LE=me(function(e,t=0){return Bs(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});h.prototype.writeBigInt64BE=me(function(e,t=0){return Ss(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Is(r,e,t,n,i,s){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Ls(r,e,t,n,i){return e=+e,t=t>>>0,i||Is(r,e,t,4,34028234663852886e22,-34028234663852886e22),tt.write(r,e,t,n,23,4),t+4}h.prototype.writeFloatLE=function(e,t,n){return Ls(this,e,t,!0,n)};h.prototype.writeFloatBE=function(e,t,n){return Ls(this,e,t,!1,n)};function Os(r,e,t,n,i){return e=+e,t=t>>>0,i||Is(r,e,t,8,17976931348623157e292,-17976931348623157e292),tt.write(r,e,t,n,52,8),t+8}h.prototype.writeDoubleLE=function(e,t,n){return Os(this,e,t,!0,n)};h.prototype.writeDoubleBE=function(e,t,n){return Os(this,e,t,!1,n)};h.prototype.copy=function(e,t,n,i){if(!h.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let s=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),s};h.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!h.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let o=e.charCodeAt(0);(i==="utf8"&&o<128||i==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let s;if(typeof e=="number")for(s=t;s<n;++s)this[s]=e;else{let o=h.isBuffer(e)?e:h.from(e,i),u=o.length;if(u===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-t;++s)this[s+t]=o[s%u]}return this};var et={};function gn(r,e,t){et[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}gn("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);gn("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);gn("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=Cs(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=Cs(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function Cs(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function wf(r,e,t){rt(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&Et(e,r.length-(t+1))}function ks(r,e,t,n,i,s){if(r>t||r<e){let o=typeof e=="bigint"?"n":"",u;throw s>3?e===0||e===BigInt(0)?u=`>= 0${o} and < 2${o} ** ${(s+1)*8}${o}`:u=`>= -(2${o} ** ${(s+1)*8-1}${o}) and < 2 ** ${(s+1)*8-1}${o}`:u=`>= ${e}${o} and <= ${t}${o}`,new et.ERR_OUT_OF_RANGE("value",u,r)}wf(n,i,s)}function rt(r,e){if(typeof r!="number")throw new et.ERR_INVALID_ARG_TYPE(e,"number",r)}function Et(r,e,t){throw Math.floor(r)!==r?(rt(r,t),new et.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new et.ERR_BUFFER_OUT_OF_BOUNDS:new et.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var Ef=/[^+/0-9A-Za-z-_]/g;function Df(r){if(r=r.split("=")[0],r=r.trim().replace(Ef,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function pn(r,e){e=e||1/0;let t,n=r.length,i=null,s=[];for(let o=0;o<n;++o){if(t=r.charCodeAt(o),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function xf(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function bf(r,e){let t,n,i,s=[];for(let o=0;o<r.length&&!((e-=2)<0);++o)t=r.charCodeAt(o),n=t>>8,i=t%256,s.push(i),s.push(n);return s}function Ns(r){return an.toByteArray(Df(r))}function tr(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function ee(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function wn(r){return r!==r}var Cf=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function me(r){return typeof BigInt>"u"?vf:r}function vf(){throw new Error("BigInt not supported")}});var Dn=m((rd,Us)=>{"use strict";var En=null;Us.exports=function(){return En===null&&(En={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),En}});var Cn=m(Rs=>{"use strict";var xn=Y(),Af=new Set(["buffer","view","utf8"]),bn=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!Af.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new xn(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new xn(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new xn(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};Rs.Encoding=bn});var _n=m(nr=>{"use strict";var{Buffer:An}=rr()||{},{Encoding:Fn}=Cn(),Ff=Dn(),Dt=class extends Fn{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new xt({encode:this.encode,decode:e=>this.decode(An.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},xt=class extends Fn{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new Dt({encode:e=>{let t=this.encode(e);return An.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},vn=class extends Fn{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new Dt({encode:e=>An.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:t}=Ff();return new xt({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(t.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};nr.BufferFormat=Dt;nr.ViewFormat=xt;nr.UTF8Format=vn});var js=m(Ie=>{"use strict";var{Buffer:B}=rr()||{Buffer:{isBuffer:()=>!1}},{textEncoder:Ps,textDecoder:Ms}=Dn()(),{BufferFormat:bt,ViewFormat:Tn,UTF8Format:Vs}=_n(),ir=r=>r;Ie.utf8=new Vs({encode:function(r){return B.isBuffer(r)?r.toString("utf8"):ArrayBuffer.isView(r)?Ms.decode(r):String(r)},decode:ir,name:"utf8",createViewTranscoder(){return new Tn({encode:function(r){return ArrayBuffer.isView(r)?r:Ps.encode(r)},decode:function(r){return Ms.decode(r)},name:`${this.name}+view`})},createBufferTranscoder(){return new bt({encode:function(r){return B.isBuffer(r)?r:ArrayBuffer.isView(r)?B.from(r.buffer,r.byteOffset,r.byteLength):B.from(String(r),"utf8")},decode:function(r){return r.toString("utf8")},name:`${this.name}+buffer`})}});Ie.json=new Vs({encode:JSON.stringify,decode:JSON.parse,name:"json"});Ie.buffer=new bt({encode:function(r){return B.isBuffer(r)?r:ArrayBuffer.isView(r)?B.from(r.buffer,r.byteOffset,r.byteLength):B.from(String(r),"utf8")},decode:ir,name:"buffer",createViewTranscoder(){return new Tn({encode:function(r){return ArrayBuffer.isView(r)?r:B.from(String(r),"utf8")},decode:function(r){return B.from(r.buffer,r.byteOffset,r.byteLength)},name:`${this.name}+view`})}});Ie.view=new Tn({encode:function(r){return ArrayBuffer.isView(r)?r:Ps.encode(r)},decode:ir,name:"view",createBufferTranscoder(){return new bt({encode:function(r){return B.isBuffer(r)?r:ArrayBuffer.isView(r)?B.from(r.buffer,r.byteOffset,r.byteLength):B.from(String(r),"utf8")},decode:ir,name:`${this.name}+buffer`})}});Ie.hex=new bt({encode:function(r){return B.isBuffer(r)?r:B.from(String(r),"hex")},decode:function(r){return r.toString("hex")},name:"hex"});Ie.base64=new bt({encode:function(r){return B.isBuffer(r)?r:B.from(String(r),"base64")},decode:function(r){return r.toString("base64")},name:"base64"})});var qs=m($s=>{"use strict";var Ks=Y(),or=js(),{Encoding:_f}=Cn(),{BufferFormat:Tf,ViewFormat:Bf,UTF8Format:Sf}=_n(),Ct=Symbol("formats"),sr=Symbol("encodings"),If=new Set(["buffer","view","utf8"]),Bn=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>If.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[sr]=new Map,this[Ct]=new Set(e);for(let t in or)try{this.encoding(t)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[sr].values()))}encoding(e){let t=this[sr].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=Nf[e],!t)throw new Ks(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=Lf(e)}let{name:n,format:i}=t;if(!this[Ct].has(i))if(this[Ct].has("view"))t=t.createViewTranscoder();else if(this[Ct].has("buffer"))t=t.createBufferTranscoder();else if(this[Ct].has("utf8"))t=t.createUTF8Transcoder();else throw new Ks(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let s of[e,n,t.name,t.commonName])this[sr].set(s,t)}return t}};$s.Transcoder=Bn;function Lf(r){if(r instanceof _f)return r;let e="type"in r&&typeof r.type=="string"?r.type:void 0,t=r.name||e||`anonymous-${Uf++}`;switch(Of(r)){case"view":return new Bf({...r,name:t});case"utf8":return new Sf({...r,name:t});case"buffer":return new Tf({...r,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function Of(r){return"format"in r&&r.format!==void 0?r.format:"buffer"in r&&typeof r.buffer=="boolean"?r.buffer?"buffer":"utf8":"code"in r&&Number.isInteger(r.code)?"view":"buffer"}var kf={binary:or.buffer,"utf-8":or.utf8},Nf={...or,...kf},Uf=0});var to=m((ud,Sn)=>{"use strict";var it=typeof Reflect=="object"?Reflect:null,zs=it&&typeof it.apply=="function"?it.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},ur;it&&typeof it.ownKeys=="function"?ur=it.ownKeys:Object.getOwnPropertySymbols?ur=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ur=function(e){return Object.getOwnPropertyNames(e)};function Rf(r){console&&console.warn&&console.warn(r)}var Gs=Number.isNaN||function(e){return e!==e};function x(){x.init.call(this)}Sn.exports=x;Sn.exports.once=jf;x.EventEmitter=x;x.prototype._events=void 0;x.prototype._eventsCount=0;x.prototype._maxListeners=void 0;var Ws=10;function cr(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(x,"defaultMaxListeners",{enumerable:!0,get:function(){return Ws},set:function(r){if(typeof r!="number"||r<0||Gs(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Ws=r}});x.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};x.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Gs(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Ys(r){return r._maxListeners===void 0?x.defaultMaxListeners:r._maxListeners}x.prototype.getMaxListeners=function(){return Ys(this)};x.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var u=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw u.context=o,u}var a=s[e];if(a===void 0)return!1;if(typeof a=="function")zs(a,this,t);else for(var l=a.length,c=Qs(a,l),n=0;n<l;++n)zs(c[n],this,t);return!0};function Hs(r,e,t,n){var i,s,o;if(cr(t),s=r._events,s===void 0?(s=r._events=Object.create(null),r._eventsCount=0):(s.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),s=r._events),o=s[e]),o===void 0)o=s[e]=t,++r._eventsCount;else if(typeof o=="function"?o=s[e]=n?[t,o]:[o,t]:n?o.unshift(t):o.push(t),i=Ys(r),i>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=r,u.type=e,u.count=o.length,Rf(u)}return r}x.prototype.addListener=function(e,t){return Hs(this,e,t,!1)};x.prototype.on=x.prototype.addListener;x.prototype.prependListener=function(e,t){return Hs(this,e,t,!0)};function Mf(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Js(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=Mf.bind(n);return i.listener=t,n.wrapFn=i,i}x.prototype.once=function(e,t){return cr(t),this.on(e,Js(this,e,t)),this};x.prototype.prependOnceListener=function(e,t){return cr(t),this.prependListener(e,Js(this,e,t)),this};x.prototype.removeListener=function(e,t){var n,i,s,o,u;if(cr(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){u=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():Pf(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,u||t)}return this};x.prototype.off=x.prototype.removeListener;x.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function Xs(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?Vf(i):Qs(i,i.length)}x.prototype.listeners=function(e){return Xs(this,e,!0)};x.prototype.rawListeners=function(e){return Xs(this,e,!1)};x.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):Zs.call(r,e)};x.prototype.listenerCount=Zs;function Zs(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}x.prototype.eventNames=function(){return this._eventsCount>0?ur(this._events):[]};function Qs(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function Pf(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function Vf(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function jf(r,e){return new Promise(function(t,n){function i(o){r.removeListener(e,s),n(o)}function s(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}eo(r,e,s,{once:!0}),e!=="error"&&Kf(r,i,{once:!0})})}function Kf(r,e,t){typeof r.on=="function"&&eo(r,"error",e,t)}function eo(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(s){n.once&&r.removeEventListener(e,i),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}});var no=m((cd,ro)=>{ro.exports=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r)});var vt=m(In=>{"use strict";var io=no();In.fromCallback=function(r,e){if(r===void 0){var t=new Promise(function(n,i){r=function(s,o){s?i(s):n(o)}});r[e!==void 0?e:"promise"]=t}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r};In.fromPromise=function(r,e){if(e===void 0)return r;r.then(function(t){io(()=>e(null,t))}).catch(function(t){io(()=>e(t))})}});var fr=m(Ln=>{"use strict";Ln.getCallback=function(r,e){return typeof r=="function"?r:e};Ln.getOptions=function(r,e){return typeof r=="object"&&r!==null?r:e!==void 0?e:{}}});var be=m(dr=>{"use strict";var{fromCallback:On}=vt(),U=Y(),{getOptions:kn,getCallback:so}=fr(),Le=Symbol("promise"),st=Symbol("callback"),te=Symbol("working"),Oe=Symbol("handleOne"),ue=Symbol("handleMany"),Nn=Symbol("autoClose"),De=Symbol("finishWork"),re=Symbol("returnMany"),ge=Symbol("closing"),At=Symbol("handleClose"),hr=Symbol("closed"),Ft=Symbol("closeCallbacks"),Ee=Symbol("keyEncoding"),ke=Symbol("valueEncoding"),Un=Symbol("abortOnClose"),ar=Symbol("legacy"),Rn=Symbol("keys"),Mn=Symbol("values"),we=Symbol("limit"),z=Symbol("count"),lr=Object.freeze({}),$f=()=>{},oo=!1,_t=class{constructor(e,t,n){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[hr]=!1,this[Ft]=[],this[te]=!1,this[ge]=!1,this[Nn]=!1,this[st]=null,this[Oe]=this[Oe].bind(this),this[ue]=this[ue].bind(this),this[At]=this[At].bind(this),this[Ee]=t[Ee],this[ke]=t[ke],this[ar]=n,this[we]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[z]=0,this[Un]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[z]}get limit(){return this[we]}next(e){let t;if(e===void 0)t=new Promise((n,i)=>{e=(s,o,u)=>{s?i(s):this[ar]?o===void 0&&u===void 0?n():n([o,u]):n(o)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[ge]?this.nextTick(e,new U("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[te]?this.nextTick(e,new U("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[te]=!0,this[st]=e,this[z]>=this[we]?this.nextTick(this[Oe],null):this._next(this[Oe])),t}_next(e){this.nextTick(e)}nextv(e,t,n){return n=so(t,n),n=On(n,Le),t=kn(t,lr),Number.isInteger(e)?(this[ge]?this.nextTick(n,new U("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[te]?this.nextTick(n,new U("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[we]<1/0&&(e=Math.min(e,this[we]-this[z])),this[te]=!0,this[st]=n,e<=0?this.nextTick(this[ue],null,[]):this._nextv(e,t,this[ue])),n[Le]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[Le])}_nextv(e,t,n){let i=[],s=(o,u,a)=>{if(o)return n(o);if(this[ar]?u===void 0&&a===void 0:u===void 0)return n(null,i);i.push(this[ar]?[u,a]:u),i.length===e?n(null,i):this._next(s)};this._next(s)}all(e,t){return t=so(e,t),t=On(t,Le),e=kn(e,lr),this[ge]?this.nextTick(t,new U("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[te]?this.nextTick(t,new U("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[te]=!0,this[st]=t,this[Nn]=!0,this[z]>=this[we]?this.nextTick(this[ue],null,[]):this._all(e,this[ue])),t[Le]}_all(e,t){let n=this[z],i=[],s=()=>{let u=this[we]<1/0?Math.min(1e3,this[we]-n):1e3;u<=0?this.nextTick(t,null,i):this._nextv(u,lr,o)},o=(u,a)=>{u?t(u):a.length===0?t(null,i):(i.push.apply(i,a),n+=a.length,s())};s()}[De](){let e=this[st];return this[Un]&&e===null?$f:(this[te]=!1,this[st]=null,this[ge]&&this._close(this[At]),e)}[re](e,t,n){this[Nn]?this.close(e.bind(null,t,n)):e(t,n)}seek(e,t){if(t=kn(t,lr),!this[ge]){if(this[te])throw new U("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(t.keyEncoding||this[Ee]),i=n.format;t.keyEncoding!==i&&(t={...t,keyEncoding:i});let s=this.db.prefixKey(n.encode(e),i);this._seek(s,t)}}}_seek(e,t){throw new U("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=On(e,Le),this[hr]?this.nextTick(e):this[ge]?this[Ft].push(e):(this[ge]=!0,this[Ft].push(e),this[te]?this[Un]&&this[De]()(new U("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[At])),e[Le]}_close(e){this.nextTick(e)}[At](){this[hr]=!0,this.db.detachResource(this);let e=this[Ft];this[Ft]=[];for(let t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[hr]||await this.close()}}},ot=class extends _t{constructor(e,t){super(e,t,!0),this[Rn]=t.keys!==!1,this[Mn]=t.values!==!1}[Oe](e,t,n){let i=this[De]();if(e)return i(e);try{t=this[Rn]&&t!==void 0?this[Ee].decode(t):void 0,n=this[Mn]&&n!==void 0?this[ke].decode(n):void 0}catch(s){return i(new xe("entry",s))}t===void 0&&n===void 0||this[z]++,i(null,t,n)}[ue](e,t){let n=this[De]();if(e)return this[re](n,e);try{for(let i of t){let s=i[0],o=i[1];i[0]=this[Rn]&&s!==void 0?this[Ee].decode(s):void 0,i[1]=this[Mn]&&o!==void 0?this[ke].decode(o):void 0}}catch(i){return this[re](n,new xe("entries",i))}this[z]+=t.length,this[re](n,null,t)}end(e){return!oo&&typeof console<"u"&&(oo=!0,console.warn(new U("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},Pn=class extends _t{constructor(e,t){super(e,t,!1)}[Oe](e,t){let n=this[De]();if(e)return n(e);try{t=t!==void 0?this[Ee].decode(t):void 0}catch(i){return n(new xe("key",i))}t!==void 0&&this[z]++,n(null,t)}[ue](e,t){let n=this[De]();if(e)return this[re](n,e);try{for(let i=0;i<t.length;i++){let s=t[i];t[i]=s!==void 0?this[Ee].decode(s):void 0}}catch(i){return this[re](n,new xe("keys",i))}this[z]+=t.length,this[re](n,null,t)}},Vn=class extends _t{constructor(e,t){super(e,t,!1)}[Oe](e,t){let n=this[De]();if(e)return n(e);try{t=t!==void 0?this[ke].decode(t):void 0}catch(i){return n(new xe("value",i))}t!==void 0&&this[z]++,n(null,t)}[ue](e,t){let n=this[De]();if(e)return this[re](n,e);try{for(let i=0;i<t.length;i++){let s=t[i];t[i]=s!==void 0?this[ke].decode(s):void 0}}catch(i){return this[re](n,new xe("values",i))}this[z]+=t.length,this[re](n,null,t)}},xe=class extends U{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}};for(let r of["_ended property","_nexting property","_end method"])Object.defineProperty(ot.prototype,r.split(" ")[0],{get(){throw new U(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new U(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})}});ot.keyEncoding=Ee;ot.valueEncoding=ke;dr.AbstractIterator=ot;dr.AbstractKeyIterator=Pn;dr.AbstractValueIterator=Vn});var uo=m(jn=>{"use strict";var{AbstractKeyIterator:qf,AbstractValueIterator:zf}=be(),Ne=Symbol("iterator"),Tt=Symbol("callback"),ut=Symbol("handleOne"),Ue=Symbol("handleMany"),Bt=class extends qf{constructor(e,t){super(e,t),this[Ne]=e.iterator({...t,keys:!0,values:!1}),this[ut]=this[ut].bind(this),this[Ue]=this[Ue].bind(this)}},pr=class extends zf{constructor(e,t){super(e,t),this[Ne]=e.iterator({...t,keys:!1,values:!0}),this[ut]=this[ut].bind(this),this[Ue]=this[Ue].bind(this)}};for(let r of[Bt,pr]){let e=r===Bt,t=e?n=>n[0]:n=>n[1];r.prototype._next=function(n){this[Tt]=n,this[Ne].next(this[ut])},r.prototype[ut]=function(n,i,s){let o=this[Tt];n?o(n):o(null,e?i:s)},r.prototype._nextv=function(n,i,s){this[Tt]=s,this[Ne].nextv(n,i,this[Ue])},r.prototype._all=function(n,i){this[Tt]=i,this[Ne].all(n,this[Ue])},r.prototype[Ue]=function(n,i){let s=this[Tt];n?s(n):s(null,i.map(t))},r.prototype._seek=function(n,i){this[Ne].seek(n,i)},r.prototype._close=function(n){this[Ne].close(n)}}jn.DefaultKeyIterator=Bt;jn.DefaultValueIterator=pr});var co=m(Dr=>{"use strict";var{AbstractIterator:Wf,AbstractKeyIterator:Gf,AbstractValueIterator:Yf}=be(),Kn=Y(),O=Symbol("nut"),wr=Symbol("undefer"),Er=Symbol("factory"),yr=class extends Wf{constructor(e,t){super(e,t),this[O]=null,this[Er]=()=>e.iterator(t),this.db.defer(()=>this[wr]())}},mr=class extends Gf{constructor(e,t){super(e,t),this[O]=null,this[Er]=()=>e.keys(t),this.db.defer(()=>this[wr]())}},gr=class extends Yf{constructor(e,t){super(e,t),this[O]=null,this[Er]=()=>e.values(t),this.db.defer(()=>this[wr]())}};for(let r of[yr,mr,gr])r.prototype[wr]=function(){this.db.status==="open"&&(this[O]=this[Er]())},r.prototype._next=function(e){this[O]!==null?this[O].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new Kn("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._nextv=function(e,t,n){this[O]!==null?this[O].nextv(e,t,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,n)):this.nextTick(n,new Kn("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._all=function(e,t){this[O]!==null?this[O].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new Kn("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._seek=function(e,t){this[O]!==null?this[O]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},r.prototype._close=function(e){this[O]!==null?this[O].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};Dr.DeferredIterator=yr;Dr.DeferredKeyIterator=mr;Dr.DeferredValueIterator=gr});var qn=m(ho=>{"use strict";var{fromCallback:fo}=vt(),xr=Y(),{getCallback:Hf,getOptions:Jf}=fr(),br=Symbol("promise"),W=Symbol("status"),ct=Symbol("operations"),St=Symbol("finishClose"),ft=Symbol("closeCallbacks"),$n=class{constructor(e){if(typeof e!="object"||e===null){let t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[ct]=[],this[ft]=[],this[W]="open",this[St]=this[St].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[ct].length}put(e,t,n){if(this[W]!=="open")throw new xr("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(t);if(i)throw i;let s=n&&n.sublevel!=null?n.sublevel:this.db,o=n,u=s.keyEncoding(n&&n.keyEncoding),a=s.valueEncoding(n&&n.valueEncoding),l=u.format;n={...n,keyEncoding:l,valueEncoding:a.format},s!==this.db&&(n.sublevel=null);let c=s.prefixKey(u.encode(e),l),f=a.encode(t);return this._put(c,f,n),this[ct].push({...o,type:"put",key:e,value:t}),this}_put(e,t,n){}del(e,t){if(this[W]!=="open")throw new xr("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let i=t&&t.sublevel!=null?t.sublevel:this.db,s=t,o=i.keyEncoding(t&&t.keyEncoding),u=o.format;return t={...t,keyEncoding:u},i!==this.db&&(t.sublevel=null),this._del(i.prefixKey(o.encode(e),u),t),this[ct].push({...s,type:"del",key:e}),this}_del(e,t){}clear(){if(this[W]!=="open")throw new xr("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[ct]=[],this}_clear(){}write(e,t){return t=Hf(e,t),t=fo(t,br),e=Jf(e),this[W]!=="open"?this.nextTick(t,new xr("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[W]="writing",this._write(e,n=>{this[W]="closing",this[ft].push(()=>t(n)),n||this.db.emit("batch",this[ct]),this._close(this[St])})),t[br]}_write(e,t){}close(e){return e=fo(e,br),this[W]==="closing"?this[ft].push(e):this[W]==="closed"?this.nextTick(e):(this[ft].push(e),this[W]!=="writing"&&(this[W]="closing",this._close(this[St]))),e[br]}_close(e){this.nextTick(e)}[St](){this[W]="closed",this.db.detachResource(this);let e=this[ft];this[ft]=[];for(let t of e)t()}};ho.AbstractChainedBatch=$n});var lo=m(ao=>{"use strict";var{AbstractChainedBatch:Xf}=qn(),Zf=Y(),ht=Symbol("encoded"),zn=class extends Xf{constructor(e){super(e),this[ht]=[]}_put(e,t,n){this[ht].push({...n,type:"put",key:e,value:t})}_del(e,t){this[ht].push({...t,type:"del",key:e})}_clear(){this[ht]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[ht].length===0?this.nextTick(t):this.db._batch(this[ht],e,t):this.nextTick(t,new Zf("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};ao.DefaultChainedBatch=zn});var mo=m((md,yo)=>{"use strict";var po=Y(),Qf=Object.prototype.hasOwnProperty,eh=new Set(["lt","lte","gt","gte"]);yo.exports=function(r,e){let t={};for(let n in r)if(!!Qf.call(r,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new po(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new po("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});eh.has(n)?t[n]=e.encode(r[n]):t[n]=r[n]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t}});var Wn=m((gd,wo)=>{var go;wo.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):r=>(go||(go=Promise.resolve())).then(r).catch(e=>setTimeout(()=>{throw e},0))});var xo=m((wd,Do)=>{"use strict";var Eo=Wn();Do.exports=function(r,...e){e.length===0?Eo(r):Eo(()=>r(...e))}});var bo=m(Cr=>{"use strict";var{AbstractIterator:th,AbstractKeyIterator:rh,AbstractValueIterator:nh}=be(),at=Symbol("unfix"),H=Symbol("iterator"),Re=Symbol("handleOne"),Ce=Symbol("handleMany"),ce=Symbol("callback"),It=class extends th{constructor(e,t,n,i){super(e,t),this[H]=n,this[at]=i,this[Re]=this[Re].bind(this),this[Ce]=this[Ce].bind(this),this[ce]=null}[Re](e,t,n){let i=this[ce];if(e)return i(e);t!==void 0&&(t=this[at](t)),i(e,t,n)}[Ce](e,t){let n=this[ce];if(e)return n(e);for(let i of t){let s=i[0];s!==void 0&&(i[0]=this[at](s))}n(e,t)}},Lt=class extends rh{constructor(e,t,n,i){super(e,t),this[H]=n,this[at]=i,this[Re]=this[Re].bind(this),this[Ce]=this[Ce].bind(this),this[ce]=null}[Re](e,t){let n=this[ce];if(e)return n(e);t!==void 0&&(t=this[at](t)),n(e,t)}[Ce](e,t){let n=this[ce];if(e)return n(e);for(let i=0;i<t.length;i++){let s=t[i];s!==void 0&&(t[i]=this[at](s))}n(e,t)}},Ot=class extends nh{constructor(e,t,n){super(e,t),this[H]=n}};for(let r of[It,Lt])r.prototype._next=function(e){this[ce]=e,this[H].next(this[Re])},r.prototype._nextv=function(e,t,n){this[ce]=n,this[H].nextv(e,t,this[Ce])},r.prototype._all=function(e,t){this[ce]=t,this[H].all(e,this[Ce])};for(let r of[Ot])r.prototype._next=function(e){this[H].next(e)},r.prototype._nextv=function(e,t,n){this[H].nextv(e,t,n)},r.prototype._all=function(e,t){this[H].all(e,t)};for(let r of[It,Lt,Ot])r.prototype._seek=function(e,t){this[H].seek(e,t)},r.prototype._close=function(e){this[H].close(e)};Cr.AbstractSublevelIterator=It;Cr.AbstractSublevelKeyIterator=Lt;Cr.AbstractSublevelValueIterator=Ot});var Fo=m((Dd,Ao)=>{"use strict";var Gn=Y(),{Buffer:Jn}=rr()||{},{AbstractSublevelIterator:ih,AbstractSublevelKeyIterator:sh,AbstractSublevelValueIterator:oh}=bo(),fe=Symbol("prefix"),Co=Symbol("upperBound"),kt=Symbol("prefixRange"),R=Symbol("parent"),Yn=Symbol("unfix"),vo=new TextEncoder,uh={separator:"!"};Ao.exports=function({AbstractLevel:r}){class e extends r{static defaults(n){if(typeof n=="string")throw new Gn("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new Gn("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?uh:n.separator?n:{...n,separator:"!"}}constructor(n,i,s){let{separator:o,manifest:u,...a}=e.defaults(s);i=fh(i,o);let l=o.charCodeAt(0)+1,c=n[R]||n;if(!vo.encode(i).every(g=>g>l&&g<127))throw new Gn(`Prefix must use bytes > ${l} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(ch(c,u),a);let f=(n.prefix||"")+o+i+o,p=f.slice(0,-1)+String.fromCharCode(l);this[R]=c,this[fe]=new vr(f),this[Co]=new vr(p),this[Yn]=new Xn,this.nextTick=c.nextTick}prefixKey(n,i){if(i==="utf8")return this[fe].utf8+n;if(n.byteLength===0)return this[fe][i];if(i==="view"){let s=this[fe].view,o=new Uint8Array(s.byteLength+n.byteLength);return o.set(s,0),o.set(n,s.byteLength),o}else{let s=this[fe].buffer;return Jn.concat([s,n],s.byteLength+n.byteLength)}}[kt](n,i){n.gte!==void 0?n.gte=this.prefixKey(n.gte,i):n.gt!==void 0?n.gt=this.prefixKey(n.gt,i):n.gte=this[fe][i],n.lte!==void 0?n.lte=this.prefixKey(n.lte,i):n.lt!==void 0?n.lt=this.prefixKey(n.lt,i):n.lte=this[Co][i]}get prefix(){return this[fe].utf8}get db(){return this[R]}_open(n,i){this[R].open({passive:!0},i)}_put(n,i,s,o){this[R].put(n,i,s,o)}_get(n,i,s){this[R].get(n,i,s)}_getMany(n,i,s){this[R].getMany(n,i,s)}_del(n,i,s){this[R].del(n,i,s)}_batch(n,i,s){this[R].batch(n,i,s)}_clear(n,i){this[kt](n,n.keyEncoding),this[R].clear(n,i)}_iterator(n){this[kt](n,n.keyEncoding);let i=this[R].iterator(n),s=this[Yn].get(this[fe].utf8.length,n.keyEncoding);return new ih(this,n,i,s)}_keys(n){this[kt](n,n.keyEncoding);let i=this[R].keys(n),s=this[Yn].get(this[fe].utf8.length,n.keyEncoding);return new sh(this,n,i,s)}_values(n){this[kt](n,n.keyEncoding);let i=this[R].values(n);return new oh(this,n,i)}}return{AbstractSublevel:e}};var ch=function(r,e){return{...r.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:Hn(r,"utf8"),buffer:Hn(r,"buffer"),view:Hn(r,"view")}}},Hn=function(r,e){return r.supports.encodings[e]?r.keyEncoding(e).name===e:!1},vr=class{constructor(e){this.utf8=e,this.view=vo.encode(e),this.buffer=Jn?Jn.from(this.view.buffer,0,this.view.byteLength):{}}},Xn=class{constructor(){this.cache=new Map}get(e,t){let n=this.cache.get(t);return n===void 0&&(t==="view"?n=function(i,s){return s.subarray(i)}.bind(null,e):n=function(i,s){return s.slice(i)}.bind(null,e),this.cache.set(t,n)),n}},fh=function(r,e){let t=0,n=r.length;for(;t<n&&r[t]===e;)t++;for(;n>t&&r[n-1]===e;)n--;return r.slice(t,n)}});var ri=m(ti=>{"use strict";var{supports:hh}=ps(),{Transcoder:ah}=qs(),{EventEmitter:lh}=to(),{fromCallback:ve}=vt(),J=Y(),{AbstractIterator:Me}=be(),{DefaultKeyIterator:dh,DefaultValueIterator:ph}=uo(),{DeferredIterator:yh,DeferredKeyIterator:mh,DeferredValueIterator:gh}=co(),{DefaultChainedBatch:_o}=lo(),{getCallback:Pe,getOptions:Ae}=fr(),Ar=mo(),w=Symbol("promise"),he=Symbol("landed"),Ve=Symbol("resources"),Zn=Symbol("closeResources"),Nt=Symbol("operations"),Ut=Symbol("undefer"),Fr=Symbol("deferOpen"),To=Symbol("options"),E=Symbol("status"),je=Symbol("defaultOptions"),lt=Symbol("transcoder"),_r=Symbol("keyEncoding"),Qn=Symbol("valueEncoding"),wh=()=>{},Rt=class extends lh{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=Ae(t);let{keyEncoding:n,valueEncoding:i,passive:s,...o}=t;this[Ve]=new Set,this[Nt]=[],this[Fr]=!0,this[To]=o,this[E]="opening",this.supports=hh(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[lt]=new ah(Eh(this)),this[_r]=this[lt].encoding(n||"utf8"),this[Qn]=this[lt].encoding(i||"utf8");for(let u of this[lt].encodings())this.supports.encodings[u.commonName]||(this.supports.encodings[u.commonName]=!0);this[je]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[_r].commonName,valueEncoding:this[Qn].commonName}),key:Object.freeze({keyEncoding:this[_r].commonName})},this.nextTick(()=>{this[Fr]&&this.open({passive:!1},wh)})}get status(){return this[E]}keyEncoding(e){return this[lt].encoding(e??this[_r])}valueEncoding(e){return this[lt].encoding(e??this[Qn])}open(e,t){t=Pe(e,t),t=ve(t,w),e={...this[To],...Ae(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=i=>{this[E]==="closing"||this[E]==="opening"?this.once(he,i?()=>n(i):n):this[E]!=="open"?t(new J("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):t()};return e.passive?this[E]==="opening"?this.once(he,n):this.nextTick(n):this[E]==="closed"||this[Fr]?(this[Fr]=!1,this[E]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[E]="closed",this[Zn](()=>{this.emit(he),n(i)}),this[Ut]();return}this[E]="open",this[Ut](),this.emit(he),this[E]==="open"&&this.emit("open"),this[E]==="open"&&this.emit("ready"),n()})):this[E]==="open"?this.nextTick(n):this.once(he,()=>this.open(e,t)),t[w]}_open(e,t){this.nextTick(t)}close(e){e=ve(e,w);let t=n=>{this[E]==="opening"||this[E]==="closing"?this.once(he,n?t(n):t):this[E]!=="closed"?e(new J("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[E]==="open"){this[E]="closing",this.emit("closing");let n=i=>{this[E]="open",this[Ut](),this.emit(he),t(i)};this[Zn](()=>{this._close(i=>{if(i)return n(i);this[E]="closed",this[Ut](),this.emit(he),this[E]==="closed"&&this.emit("closed"),t()})})}else this[E]==="closed"?this.nextTick(t):this.once(he,()=>this.close(e));return e[w]}[Zn](e){if(this[Ve].size===0)return this.nextTick(e);let t=this[Ve].size,n=!0,i=()=>{--t===0&&(n?this.nextTick(e):e())};for(let s of this[Ve])s.close(i);n=!1,this[Ve].clear()}_close(e){this.nextTick(e)}get(e,t,n){if(n=Pe(t,n),n=ve(n,w),t=Ae(t,this[je].entry),this[E]==="opening")return this.defer(()=>this.get(e,t,n)),n[w];if(dt(this,n))return n[w];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[w];let s=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),u=s.format,a=o.format;return(t.keyEncoding!==u||t.valueEncoding!==a)&&(t=Object.assign({},t,{keyEncoding:u,valueEncoding:a})),this._get(this.prefixKey(s.encode(e),u),t,(l,c)=>{if(l)return(l.code==="LEVEL_NOT_FOUND"||l.notFound||/NotFound/i.test(l))&&(l.code||(l.code="LEVEL_NOT_FOUND"),l.notFound||(l.notFound=!0),l.status||(l.status=404)),n(l);try{c=o.decode(c)}catch(f){return n(new J("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:f}))}n(null,c)}),n[w]}_get(e,t,n){this.nextTick(n,new Error("NotFound"))}getMany(e,t,n){if(n=Pe(t,n),n=ve(n,w),t=Ae(t,this[je].entry),this[E]==="opening")return this.defer(()=>this.getMany(e,t,n)),n[w];if(dt(this,n))return n[w];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[w];if(e.length===0)return this.nextTick(n,null,[]),n[w];let i=this.keyEncoding(t.keyEncoding),s=this.valueEncoding(t.valueEncoding),o=i.format,u=s.format;(t.keyEncoding!==o||t.valueEncoding!==u)&&(t=Object.assign({},t,{keyEncoding:o,valueEncoding:u}));let a=new Array(e.length);for(let l=0;l<e.length;l++){let c=e[l],f=this._checkKey(c);if(f)return this.nextTick(n,f),n[w];a[l]=this.prefixKey(i.encode(c),o)}return this._getMany(a,t,(l,c)=>{if(l)return n(l);try{for(let f=0;f<c.length;f++)c[f]!==void 0&&(c[f]=s.decode(c[f]))}catch(f){return n(new J(`Could not decode one or more of ${c.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:f}))}n(null,c)}),n[w]}_getMany(e,t,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,t,n,i){if(i=Pe(n,i),i=ve(i,w),n=Ae(n,this[je].entry),this[E]==="opening")return this.defer(()=>this.put(e,t,n,i)),i[w];if(dt(this,i))return i[w];let s=this._checkKey(e)||this._checkValue(t);if(s)return this.nextTick(i,s),i[w];let o=this.keyEncoding(n.keyEncoding),u=this.valueEncoding(n.valueEncoding),a=o.format,l=u.format;(n.keyEncoding!==a||n.valueEncoding!==l)&&(n=Object.assign({},n,{keyEncoding:a,valueEncoding:l}));let c=this.prefixKey(o.encode(e),a),f=u.encode(t);return this._put(c,f,n,p=>{if(p)return i(p);this.emit("put",e,t),i()}),i[w]}_put(e,t,n,i){this.nextTick(i)}del(e,t,n){if(n=Pe(t,n),n=ve(n,w),t=Ae(t,this[je].key),this[E]==="opening")return this.defer(()=>this.del(e,t,n)),n[w];if(dt(this,n))return n[w];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[w];let s=this.keyEncoding(t.keyEncoding),o=s.format;return t.keyEncoding!==o&&(t=Object.assign({},t,{keyEncoding:o})),this._del(this.prefixKey(s.encode(e),o),t,u=>{if(u)return n(u);this.emit("del",e),n()}),n[w]}_del(e,t,n){this.nextTick(n)}batch(e,t,n){if(!arguments.length){if(this[E]==="opening")return new _o(this);if(this[E]!=="open")throw new J("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=Pe(t,n),n=ve(n,w),t=Ae(t,this[je].empty),this[E]==="opening")return this.defer(()=>this.batch(e,t,n)),n[w];if(dt(this,n))return n[w];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[w];if(e.length===0)return this.nextTick(n),n[w];let i=new Array(e.length),{keyEncoding:s,valueEncoding:o,...u}=t;for(let a=0;a<e.length;a++){if(typeof e[a]!="object"||e[a]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[w];let l=Object.assign({},e[a]);if(l.type!=="put"&&l.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[w];let c=this._checkKey(l.key);if(c)return this.nextTick(n,c),n[w];let f=l.sublevel!=null?l.sublevel:this,p=f.keyEncoding(l.keyEncoding||s),g=p.format;if(l.key=f.prefixKey(p.encode(l.key),g),l.keyEncoding=g,l.type==="put"){let d=this._checkValue(l.value);if(d)return this.nextTick(n,d),n[w];let y=f.valueEncoding(l.valueEncoding||o);l.value=y.encode(l.value),l.valueEncoding=y.format}f!==this&&(l.sublevel=null),i[a]=l}return this._batch(i,u,a=>{if(a)return n(a);this.emit("batch",e),n()}),n[w]}_batch(e,t,n){this.nextTick(n)}sublevel(e,t){return this._sublevel(e,ei.defaults(t))}_sublevel(e,t){return new ei(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=Pe(e,t),t=ve(t,w),e=Ae(e,this[je].empty),this[E]==="opening")return this.defer(()=>this.clear(e,t)),t[w];if(dt(this,t))return t[w];let n=e,i=this.keyEncoding(e.keyEncoding);return e=Ar(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(t):this._clear(e,s=>{if(s)return t(s);this.emit("clear",n),t()}),t[w]}_clear(e,t){this.nextTick(t)}iterator(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Ar(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[Me.keyEncoding]=t,e[Me.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[E]==="opening")return new yh(this,e);if(this[E]!=="open")throw new J("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new Me(this,e)}keys(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Ar(e,t),e[Me.keyEncoding]=t,e[Me.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[E]==="opening")return new mh(this,e);if(this[E]!=="open")throw new J("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new dh(this,e)}values(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Ar(e,t),e[Me.keyEncoding]=t,e[Me.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[E]==="opening")return new gh(this,e);if(this[E]!=="open")throw new J("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new ph(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[Nt].push(e)}[Ut](){if(this[Nt].length===0)return;let e=this[Nt];this[Nt]=[];for(let t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[Ve].add(e)}detachResource(e){this[Ve].delete(e)}_chainedBatch(){return new _o(this)}_checkKey(e){if(e==null)return new J("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new J("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};Rt.prototype.nextTick=xo();var{AbstractSublevel:ei}=Fo()({AbstractLevel:Rt});ti.AbstractLevel=Rt;ti.AbstractSublevel=ei;var dt=function(r,e){return r[E]!=="open"?(r.nextTick(e,new J("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},Eh=function(r){return Object.keys(r.supports.encodings).filter(e=>!!r.supports.encodings[e])}});var ni=m(Ke=>{"use strict";Ke.AbstractLevel=ri().AbstractLevel;Ke.AbstractSublevel=ri().AbstractSublevel;Ke.AbstractIterator=be().AbstractIterator;Ke.AbstractKeyIterator=be().AbstractKeyIterator;Ke.AbstractValueIterator=be().AbstractValueIterator;Ke.AbstractChainedBatch=qn().AbstractChainedBatch});var So=m((Cd,Bo)=>{Bo.exports=xh;var Dh=Wn();function xh(r,e,t){if(typeof e!="number")throw new Error("second argument must be a Number");let n,i,s,o,u,a=!0,l;Array.isArray(r)?(n=[],s=i=r.length):(o=Object.keys(r),n={},s=i=o.length);function c(p){function g(){t&&t(p,n),t=null}a?Dh(g):g()}function f(p,g,d){if(n[p]=d,g&&(u=!0),--s===0||g)c(g);else if(!u&&l<i){let y;o?(y=o[l],l+=1,r[y](function(D,C){f(y,D,C)})):(y=l,l+=1,r[y](function(D,C){f(y,D,C)}))}}l=e,s?o?o.some(function(p,g){return r[p](function(d,y){f(p,d,y)}),g===e-1}):r.some(function(p,g){return p(function(d,y){f(g,d,y)}),g===e-1}):c(null),a=!1}});var ii=m((vd,Io)=>{"use strict";Io.exports=function(e){let t=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,s=e.lte===void 0;return t!==void 0&&n!==void 0?IDBKeyRange.bound(t,n,i,s):t!==void 0?IDBKeyRange.lowerBound(t,i):n!==void 0?IDBKeyRange.upperBound(n,s):null}});var si=m((Ad,Lo)=>{"use strict";var bh=new TextEncoder;Lo.exports=function(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):bh.encode(r)}});var Ro=m(Uo=>{"use strict";var{AbstractIterator:Ch}=ni(),Oo=ii(),Tr=si(),ne=Symbol("cache"),ae=Symbol("finished"),M=Symbol("options"),le=Symbol("currentOptions"),$e=Symbol("position"),oi=Symbol("location"),pt=Symbol("first"),ko={},ui=class extends Ch{constructor(e,t,n){super(e,n),this[ne]=[],this[ae]=this.limit===0,this[M]=n,this[le]={...n},this[$e]=void 0,this[oi]=t,this[pt]=!0}_nextv(e,t,n){if(this[pt]=!1,this[ae])return this.nextTick(n,null,[]);if(this[ne].length>0)return e=Math.min(e,this[ne].length),this.nextTick(n,null,this[ne].splice(0,e));this[$e]!==void 0&&(this[M].reverse?(this[le].lt=this[$e],this[le].lte=void 0):(this[le].gt=this[$e],this[le].gte=void 0));let i;try{i=Oo(this[le])}catch{return this[ae]=!0,this.nextTick(n,null,[])}let s=this.db.db.transaction([this[oi]],"readonly"),o=s.objectStore(this[oi]),u=[];if(this[M].reverse){let a=!this[M].values&&o.openKeyCursor?"openKeyCursor":"openCursor";o[a](i,"prev").onsuccess=l=>{let c=l.target.result;if(c){let{key:f,value:p}=c;this[$e]=f,u.push([this[M].keys&&f!==void 0?Tr(f):void 0,this[M].values&&p!==void 0?Tr(p):void 0]),u.length<e?c.continue():No(s)}else this[ae]=!0}}else{let a,l,c=()=>{if(a===void 0||l===void 0)return;let f=Math.max(a.length,l.length);f===0||e===1/0?this[ae]=!0:this[$e]=a[f-1],u.length=f;for(let p=0;p<f;p++){let g=a[p],d=l[p];u[p]=[this[M].keys&&g!==void 0?Tr(g):void 0,this[M].values&&d!==void 0?Tr(d):void 0]}No(s)};this[M].keys||e<1/0?o.getAllKeys(i,e<1/0?e:void 0).onsuccess=f=>{a=f.target.result,c()}:(a=[],this.nextTick(c)),this[M].values?o.getAll(i,e<1/0?e:void 0).onsuccess=f=>{l=f.target.result,c()}:(l=[],this.nextTick(c))}s.onabort=()=>{n(s.error||new Error("aborted by user")),n=null},s.oncomplete=()=>{n(null,u),n=null}}_next(e){if(this[ne].length>0){let[t,n]=this[ne].shift();this.nextTick(e,null,t,n)}else if(this[ae])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[pt]&&(this[pt]=!1,t=1),this._nextv(t,ko,(n,i)=>{if(n)return e(n);this[ne]=i,this._next(e)})}}_all(e,t){this[pt]=!1;let n=this[ne].splice(0,this[ne].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(t,null,n);this._nextv(i,ko,(s,o)=>{if(s)return t(s);n.length>0&&(o=n.concat(o)),t(null,o)})}_seek(e,t){this[pt]=!0,this[ne]=[],this[ae]=!1,this[$e]=void 0,this[le]={...this[M]};let n;try{n=Oo(this[M])}catch{this[ae]=!0;return}n!==null&&!n.includes(e)?this[ae]=!0:this[M].reverse?this[le].lte=e:this[le].gte=e}};Uo.Iterator=ui;function No(r){typeof r.commit=="function"&&r.commit()}});var Po=m((_d,Mo)=>{"use strict";Mo.exports=function(e,t,n,i,s){if(i.limit===0)return e.nextTick(s);let o=e.db.transaction([t],"readwrite"),u=o.objectStore(t),a=0;o.oncomplete=function(){s()},o.onabort=function(){s(o.error||new Error("aborted by user"))};let l=u.openKeyCursor?"openKeyCursor":"openCursor",c=i.reverse?"prev":"next";u[l](n,c).onsuccess=function(f){let p=f.target.result;p&&(u.delete(p.key).onsuccess=function(){(i.limit<=0||++a<i.limit)&&p.continue()})}}});var zo=m(qo=>{"use strict";var{AbstractLevel:vh}=ni(),Vo=Y(),Ah=So(),{fromCallback:Fh}=vt(),{Iterator:_h}=Ro(),jo=si(),Th=Po(),Bh=ii(),$o="level-js-",Mt=Symbol("idb"),ci=Symbol("namePrefix"),de=Symbol("location"),fi=Symbol("version"),qe=Symbol("store"),Pt=Symbol("onComplete"),Ko=Symbol("promise"),Br=class extends vh{constructor(e,t,n){if(typeof t=="function"||typeof n=="function")throw new Vo("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:s,...o}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},o),typeof e!="string")throw new Error("constructor requires a location string argument");this[de]=e,this[ci]=i??$o,this[fi]=parseInt(s||1,10),this[Mt]=null}get location(){return this[de]}get namePrefix(){return this[ci]}get version(){return this[fi]}get db(){return this[Mt]}get type(){return"browser-level"}_open(e,t){let n=indexedDB.open(this[ci]+this[de],this[fi]);n.onerror=function(){t(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[Mt]=n.result,t()},n.onupgradeneeded=i=>{let s=i.target.result;s.objectStoreNames.contains(this[de])||s.createObjectStore(this[de])}}[qe](e){return this[Mt].transaction([this[de]],e).objectStore(this[de])}[Pt](e,t){let n=e.transaction;n.onabort=function(){t(n.error||new Error("aborted by user"))},n.oncomplete=function(){t(null,e.result)}}_get(e,t,n){let i=this[qe]("readonly"),s;try{s=i.get(e)}catch(o){return this.nextTick(n,o)}this[Pt](s,function(o,u){if(o)return n(o);if(u===void 0)return n(new Vo("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,jo(u))})}_getMany(e,t,n){let i=this[qe]("readonly"),s=e.map(o=>u=>{let a;try{a=i.get(o)}catch(l){return u(l)}a.onsuccess=()=>{let l=a.result;u(null,l===void 0?l:jo(l))},a.onerror=l=>{l.stopPropagation(),u(a.error)}});Ah(s,16,n)}_del(e,t,n){let i=this[qe]("readwrite"),s;try{s=i.delete(e)}catch(o){return this.nextTick(n,o)}this[Pt](s,n)}_put(e,t,n,i){let s=this[qe]("readwrite"),o;try{o=s.put(t,e)}catch(u){return this.nextTick(i,u)}this[Pt](o,i)}_iterator(e){return new _h(this,this[de],e)}_batch(e,t,n){let i=this[qe]("readwrite"),s=i.transaction,o=0,u;s.onabort=function(){n(u||s.error||new Error("aborted by user"))},s.oncomplete=function(){n()};function a(){let l=e[o++],c=l.key,f;try{f=l.type==="del"?i.delete(c):i.put(l.value,c)}catch(p){u=p,s.abort();return}o<e.length?f.onsuccess=a:typeof s.commit=="function"&&s.commit()}a()}_clear(e,t){let n,i;try{n=Bh(e)}catch{return this.nextTick(t)}if(e.limit>=0)return Th(this,this[de],n,e,t);try{let s=this[qe]("readwrite");i=n?s.delete(n):s.clear()}catch(s){return this.nextTick(t,s)}this[Pt](i,t)}_close(e){this[Mt].close(),this.nextTick(e)}};Br.destroy=function(r,e,t){typeof e=="function"&&(t=e,e=$o),t=Fh(t,Ko);let n=indexedDB.deleteDatabase(e+r);return n.onsuccess=function(){t()},n.onerror=function(i){t(i)},t[Ko]};qo.BrowserLevel=Br});var Go=m(Wo=>{Wo.Level=zo().BrowserLevel});var Lh={};I(Lh,{LevelDatastore:()=>li});var pi=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");var kr={};I(kr,{identity:()=>uu});function ru(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var s=r.charAt(i),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=i}var u=r.length,a=r.charAt(0),l=Math.log(u)/Math.log(256),c=Math.log(256)/Math.log(u);function f(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var y=0,D=0,C=0,S=d.length;C!==S&&d[C]===0;)C++,y++;for(var P=(S-C)*c+1>>>0,_=new Uint8Array(P);C!==S;){for(var G=d[C],V=0,k=P-1;(G!==0||V<D)&&k!==-1;k--,V++)G+=256*_[k]>>>0,_[k]=G%u>>>0,G=G/u>>>0;if(G!==0)throw new Error("Non-zero carry");D=V,C++}for(var j=P-D;j!==P&&_[j]===0;)j++;for(var ze=a.repeat(y);j<P;++j)ze+=r.charAt(_[j]);return ze}function p(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var y=0;if(d[y]!==" "){for(var D=0,C=0;d[y]===a;)D++,y++;for(var S=(d.length-y)*l+1>>>0,P=new Uint8Array(S);d[y];){var _=t[d.charCodeAt(y)];if(_===255)return;for(var G=0,V=S-1;(_!==0||G<C)&&V!==-1;V--,G++)_+=u*P[V]>>>0,P[V]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");C=G,y++}if(d[y]!==" "){for(var k=S-C;k!==S&&P[k]===0;)k++;for(var j=new Uint8Array(D+(S-k)),ze=D;k!==S;)j[ze++]=P[k++];return j}}}function g(d){var y=p(d);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:g}}var nu=ru,iu=nu,yi=iu;var Ph=new Uint8Array(0);var mi=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},ie=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};var gi=r=>new TextEncoder().encode(r),wi=r=>new TextDecoder().decode(r);var Sr=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Ir=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Di(this,e)}},Lr=class{constructor(e){this.decoders=e}or(e){return Di(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Di=(r,e)=>new Lr({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),Or=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Sr(e,t,n),this.decoder=new Ir(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},We=({name:r,prefix:e,encode:t,decode:n})=>new Or(r,e,t,n),pe=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=yi(t,e);return We({prefix:r,name:e,encode:n,decode:s=>ie(i(s))})},su=(r,e,t,n)=>{let i={};for(let c=0;c<e.length;++c)i[e[c]]=c;let s=r.length;for(;r[s-1]==="=";)--s;let o=new Uint8Array(s*t/8|0),u=0,a=0,l=0;for(let c=0;c<s;++c){let f=i[r[c]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);a=a<<t|f,u+=t,u>=8&&(u-=8,o[l++]=255&a>>u)}if(u>=t||255&a<<8-u)throw new SyntaxError("Unexpected end of data");return o},ou=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,s="",o=0,u=0;for(let a=0;a<r.length;++a)for(u=u<<8|r[a],o+=8;o>t;)o-=t,s+=e[i&u>>o];if(o&&(s+=e[i&u<<t-o]),n)for(;s.length*t&7;)s+="=";return s},v=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>We({prefix:e,name:r,encode(i){return ou(i,n,t)},decode(i){return su(i,n,t,r)}});var uu=We({prefix:"\0",name:"identity",encode:r=>wi(r),decode:r=>gi(r)});var Nr={};I(Nr,{base2:()=>cu});var cu=v({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ur={};I(Ur,{base8:()=>fu});var fu=v({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Rr={};I(Rr,{base10:()=>hu});var hu=pe({prefix:"9",name:"base10",alphabet:"0123456789"});var Mr={};I(Mr,{base16:()=>au,base16upper:()=>lu});var au=v({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),lu=v({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Pr={};I(Pr,{base32:()=>ye,base32hex:()=>mu,base32hexpad:()=>wu,base32hexpadupper:()=>Eu,base32hexupper:()=>gu,base32pad:()=>pu,base32padupper:()=>yu,base32upper:()=>du,base32z:()=>Du});var ye=v({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),du=v({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),pu=v({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),yu=v({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),mu=v({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),gu=v({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),wu=v({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Eu=v({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Du=v({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Vr={};I(Vr,{base36:()=>xu,base36upper:()=>bu});var xu=pe({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),bu=pe({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var jr={};I(jr,{base58btc:()=>K,base58flickr:()=>Cu});var K=pe({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Cu=pe({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var $r={};I($r,{base64:()=>Kr,base64pad:()=>vu,base64url:()=>Au,base64urlpad:()=>Fu});var Kr=v({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),vu=v({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Au=v({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Fu=v({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var qr={};I(qr,{base256emoji:()=>Iu});var xi=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),_u=xi.reduce((r,e,t)=>(r[t]=e,r),[]),Tu=xi.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function Bu(r){return r.reduce((e,t)=>(e+=_u[t],e),"")}function Su(r){let e=[];for(let t of r){let n=Tu[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var Iu=We({prefix:"\u{1F680}",name:"base256emoji",encode:Bu,decode:Su});var Yr={};I(Yr,{sha256:()=>Ju,sha512:()=>Xu});var Lu=vi,bi=128,Ou=127,ku=~Ou,Nu=Math.pow(2,31);function vi(r,e,t){e=e||[],t=t||0;for(var n=t;r>=Nu;)e[t++]=r&255|bi,r/=128;for(;r&ku;)e[t++]=r&255|bi,r>>>=7;return e[t]=r|0,vi.bytes=t-n+1,e}var Uu=zr,Ru=128,Ci=127;function zr(r,n){var t=0,n=n||0,i=0,s=n,o,u=r.length;do{if(s>=u)throw zr.bytes=0,new RangeError("Could not decode varint");o=r[s++],t+=i<28?(o&Ci)<<i:(o&Ci)*Math.pow(2,i),i+=7}while(o>=Ru);return zr.bytes=s-n,t}var Mu=Math.pow(2,7),Pu=Math.pow(2,14),Vu=Math.pow(2,21),ju=Math.pow(2,28),Ku=Math.pow(2,35),$u=Math.pow(2,42),qu=Math.pow(2,49),zu=Math.pow(2,56),Wu=Math.pow(2,63),Gu=function(r){return r<Mu?1:r<Pu?2:r<Vu?3:r<ju?4:r<Ku?5:r<$u?6:r<qu?7:r<zu?8:r<Wu?9:10},Yu={encode:Lu,decode:Uu,encodingLength:Gu},Hu=Yu,yt=Hu;var mt=r=>[yt.decode(r),yt.decode.bytes],Ge=(r,e,t=0)=>(yt.encode(r,e,t),e),Ye=r=>yt.encodingLength(r);var Fe=(r,e)=>{let t=e.byteLength,n=Ye(r),i=n+Ye(t),s=new Uint8Array(i+t);return Ge(r,s,0),Ge(t,s,n),s.set(e,i),new He(r,t,e,s)},Ai=r=>{let e=ie(r),[t,n]=mt(e),[i,s]=mt(e.subarray(n)),o=e.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new He(t,i,o,e)},Fi=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&mi(r.bytes,e.bytes),He=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};var Gr=({name:r,code:e,encode:t})=>new Wr(r,e,t),Wr=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Fe(this.code,t):t.then(n=>Fe(this.code,n))}else throw Error("Unknown type, must be binary type")}};var Ti=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),Ju=Gr({name:"sha2-256",code:18,encode:Ti("SHA-256")}),Xu=Gr({name:"sha2-512",code:19,encode:Ti("SHA-512")});var Hr={};I(Hr,{identity:()=>ec});var Bi=0,Zu="identity",Si=ie,Qu=r=>Fe(Bi,Si(r)),ec={code:Bi,name:Zu,encode:Si,digest:Qu};var oa=new TextEncoder,ua=new TextDecoder;var A=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:qt,byteLength:qt,code:$t,version:$t,multihash:$t,bytes:$t,_baseCache:qt,asCID:qt})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==wt)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==oc)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return A.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=Fe(e,t);return A.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Fi(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:i}=this;switch(n){case 0:return ic(t,i,e||K.encoder);default:return sc(t,i,e||ye.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return cc(/^0\.0/,fc),!!(e&&(e[Li]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof A)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:i,bytes:s}=e;return new A(t,n,i,s||Ii(t,n,i.bytes))}else if(e!=null&&e[Li]===!0){let{version:t,multihash:n,code:i}=e,s=Ai(n);return A.create(t,i,s)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==wt)throw new Error(`Version 0 CID must use dag-pb (code: ${wt}) block encoding`);return new A(e,t,n,n.bytes)}case 1:{let i=Ii(e,t,n.bytes);return new A(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return A.create(0,wt,e)}static createV1(e,t){return A.create(1,e,t)}static decode(e){let[t,n]=A.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=A.inspectBytes(e),n=t.size-t.multihashSize,i=ie(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let s=i.subarray(t.multihashSize-t.digestSize),o=new He(t.multihashCode,t.digestSize,s,i);return[t.version===0?A.createV0(o):A.createV1(t.codec,o),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[f,p]=mt(e.subarray(t));return t+=p,f},i=n(),s=wt;if(i===18?(i=0,t=0):i===1&&(s=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let o=t,u=n(),a=n(),l=t+a,c=l-o;return{version:i,codec:s,multihashCode:u,digestSize:a,multihashSize:c,size:l}}static parse(e,t){let[n,i]=nc(e,t),s=A.decode(i);return s._baseCache.set(n,e),s}},nc=(r,e)=>{switch(r[0]){case"Q":{let t=e||K;return[K.prefix,t.decode(`${K.prefix}${r}`)]}case K.prefix:{let t=e||K;return[K.prefix,t.decode(r)]}case ye.prefix:{let t=e||ye;return[ye.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},ic=(r,e,t)=>{let{prefix:n}=t;if(n!==K.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let s=t.encode(r).slice(1);return e.set(n,s),s}else return i},sc=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let s=t.encode(r);return e.set(n,s),s}else return i},wt=112,oc=18,Ii=(r,e,t)=>{let n=Ye(r),i=n+Ye(e),s=new Uint8Array(i+t.byteLength);return Ge(r,s,0),Ge(e,s,n),s.set(t,i),s},Li=Symbol.for("@ipld/js-cid/CID"),$t={writable:!1,configurable:!1,enumerable:!0},qt={writable:!1,enumerable:!1,configurable:!1},uc="0.0.0-dev",cc=(r,e)=>{if(r.test(uc))console.warn(e);else throw new Error(e)},fc=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var Jr={...kr,...Nr,...Ur,...Rr,...Mr,...Pr,...Vr,...jr,...$r,...qr},ya={...Yr,...Hr};function Oi(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function Ni(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var ki=Ni("utf8","u",r=>{let e=new TextDecoder("utf8");return"u"+e.decode(r)},r=>new TextEncoder().encode(r.substring(1))),Xr=Ni("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=Oi(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),hc={utf8:ki,"utf-8":ki,hex:Jr.base16,latin1:Xr,ascii:Xr,binary:Xr,...Jr},zt=hc;function Ui(r,e="utf8"){let t=zt[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}function Ri(r,e="utf8"){let t=zt[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}var se="/",Mi=new TextEncoder().encode(se),Wt=Mi[0],b=class{constructor(e,t){if(typeof e=="string")this._buf=Ri(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Wt)throw new Error("Invalid key")}toString(e="utf8"){return Ui(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new b(e.join(se))}static random(){return new b(pi().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new b(e):typeof e.uint8Array=="function"?new b(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=Mi),this._buf[0]!==Wt){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Wt,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Wt;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let s=t[i],o=n[i];if(s<o)return!0;if(s>o)return!1}return t.length<n.length}reverse(){return b.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(se).slice(1)}type(){return ac(this.baseNamespace())}name(){return lc(this.baseNamespace())}instance(e){return new b(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(se)||(e+=se),e+=this.type(),new b(e)}parent(){let e=this.list();return e.length===1?new b(se):new b(e.slice(0,-1).join(se))}child(e){return this.toString()===se?e:e.toString()===se?this:new b(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return b.withNamespaces([...this.namespaces(),...dc(e.map(t=>t.namespaces()))])}};function ac(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function lc(r){let e=r.split(":");return e[e.length-1]}function dc(r){return[].concat(...r)}var $={};I($,{abortedError:()=>yc,dbDeleteFailedError:()=>Qr,dbOpenFailedError:()=>Zr,dbWriteFailedError:()=>en,notFoundError:()=>Gt});var Je=T(ji(),1);function Zr(r){return r=r||new Error("Cannot open database"),(0,Je.default)(r,"ERR_DB_OPEN_FAILED")}function Qr(r){return r=r||new Error("Delete failed"),(0,Je.default)(r,"ERR_DB_DELETE_FAILED")}function en(r){return r=r||new Error("Write failed"),(0,Je.default)(r,"ERR_DB_WRITE_FAILED")}function Gt(r){return r=r||new Error("Not Found"),(0,Je.default)(r,"ERR_NOT_FOUND")}function yc(r){return r=r||new Error("Aborted"),(0,Je.default)(r,"ERR_ABORTED")}var Ki="SHARDING",$i="_README";var zi=T(tn(),1),Yt=(r,e)=>async function*(){yield*(await(0,zi.default)(r)).sort(e)}();var nn=T(rn(),1),_e=T(Ht(),1),sn=T(Jt(),1),X=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:n,value:i}of e)await this.put(n,i,t),yield{key:n,value:i}}async*getMany(e,t={}){for await(let n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(let n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(n,i){e.push({key:n,value:i})},delete(n){t.push(n)},commit:async n=>{await(0,nn.default)(this.putMany(e,n)),e=[],await(0,nn.default)(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(e.prefix!=null&&(n=(0,_e.default)(n,i=>i.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,s)=>(0,_e.default)(i,s),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,s)=>Yt(i,s),n)),e.offset!=null){let i=0;n=(0,_e.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,sn.default)(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(e.prefix!=null&&(n=(0,_e.default)(n,i=>i.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,s)=>(0,_e.default)(i,s),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,s)=>Yt(i,s),n)),e.offset!=null){let i=0;n=(0,_e.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,sn.default)(n,e.limit)),n}};var _c=T(on(),1);var Fc=T(cn(),1);var yl=new b(Ki),ml=new b($i);var Tc=T(Ht(),1),Bc=T(Jt(),1),Sc=T(cn(),1);var Z=T(fs(),1);Z.default.formatters.b=r=>r==null?"undefined":K.baseEncode(r);Z.default.formatters.t=r=>r==null?"undefined":ye.baseEncode(r);Z.default.formatters.m=r=>r==null?"undefined":Kr.baseEncode(r);Z.default.formatters.p=r=>r==null?"undefined":r.toString();Z.default.formatters.c=r=>r==null?"undefined":r.toString();Z.default.formatters.k=r=>r==null?"undefined":r.toString();function hs(r){return Object.assign((0,Z.default)(r),{error:(0,Z.default)(`${r}:error`),trace:(0,Z.default)(`${r}:trace`)})}var $c=T(rn(),1),Sl=hs("datastore:core:tiered");var Vt=T(Ht(),1),Yo=T(on(),1),hi=T(Jt(),1),ai=T(ls(),1),Ho=T(Go(),1),li=class extends X{constructor(e,t={}){super(),this.db=typeof e=="string"?new Ho.Level(e,{...t,keyEncoding:"utf8",valueEncoding:"view"}):e,this.opts={createIfMissing:!0,compression:!1,...t}}async open(){try{await this.db.open(this.opts)}catch(e){throw $.dbOpenFailedError(e)}}async put(e,t){try{await this.db.put(e.toString(),t)}catch(n){throw $.dbWriteFailedError(n)}}async get(e){let t;try{t=await this.db.get(e.toString())}catch(n){throw n.notFound?$.notFoundError(n):$.dbWriteFailedError(n)}return t}async has(e){try{await this.db.get(e.toString())}catch(t){if(t.notFound)return!1;throw t}return!0}async delete(e){try{await this.db.del(e.toString())}catch(t){throw $.dbDeleteFailedError(t)}}close(){return this.db&&this.db.close()}batch(){let e=[];return{put:(t,n)=>{e.push({type:"put",key:t.toString(),value:n})},delete:t=>{e.push({type:"del",key:t.toString()})},commit:()=>this.db.batch(e)}}query(e){let t=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(t=e.filters.reduce((s,o)=>(0,Vt.default)(s,o),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((s,o)=>(0,ai.default)(s,o),t));let{offset:n,limit:i}=e;if(n){let s=0;t=(0,Vt.default)(t,()=>s++>=n)}return i&&(t=(0,hi.default)(t,i)),t}queryKeys(e){let t=(0,Yo.default)(this._query({values:!1,prefix:e.prefix}),({key:s})=>s);Array.isArray(e.filters)&&(t=e.filters.reduce((s,o)=>(0,Vt.default)(s,o),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((s,o)=>(0,ai.default)(s,o),t));let{offset:n,limit:i}=e;if(n){let s=0;t=(0,Vt.default)(t,()=>s++>=n)}return i&&(t=(0,hi.default)(t,i)),t}_query(e){let t={keys:!0,keyEncoding:"buffer",values:e.values};if(e.prefix!=null){let i=e.prefix.toString();t.gte=i,t.lt=i+"\xFF"}let n=this.db.iterator(t);if(n[Symbol.asyncIterator])return Sh(n);if(n.next!=null&&n.end!=null)return Ih(n);throw new Error("Level returned incompatible iterator")}};async function*Sh(r){for await(let[e,t]of r)yield{key:new b(e,!1),value:t};await r.close()}function Ih(r){return{[Symbol.asyncIterator](){return{next:()=>new Promise((e,t)=>{r.next((n,i,s)=>{if(n)return t(n);if(i==null)return r.end(o=>{if(o)return t(o);e({done:!0,value:void 0})});e({done:!1,value:{key:new b(i,!1),value:s}})})}),return:()=>new Promise((e,t)=>{r.end(n=>{if(n)return t(n);e({done:!0,value:void 0})})})}}}}return tu(Lh);})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
return DatastoreLevel}));
